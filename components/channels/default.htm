<!-- This Plugin is created for OctoberCMS v3 by NvandenDries.nl -->

{% set Channels = __SELF__.item %}
{% for item in Channels %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<div class="mt-3">
    <div id="twitch-embed"></div>
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <script type="text/javascript">
        new Twitch.Embed("twitch-embed", {
        width: {{ item.width }},
        height: {{ item.height }},
        theme: "{{ item.theme }}",
        channel: "{{ item.channel }}",
        parent: "{{ item.parent }}",
        allowfullscreen: "{{ item.allowfullscreen }}",
        muted: "{{ item.muted }}",
        autoplay: "{{ item.autoplay }}"
        });
        embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
          var player = embed.getPlayer();
          player.play();
        });
    </script>
</div>
{% else %}
<div class="no-data mt-3">
  <div class="alert alert-danger" role="alert">
    <i><i class="bi bi-exclamation-triangle"></i> No Twitch Channels Configured</i>
  </div>
</div>
{% endfor %}

